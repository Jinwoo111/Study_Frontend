# Single Page Application & Routing

### SPA(Single Page Application)
SPA는 기본적으로 단일 페이지로 구성되며 기존의 서버 사이드 렌더링과 비교할 때, 배포가 간단하며 네이티브 앱과 유사한 사용자 경험을 제공할 수 있다는 장점이 있다.

SPA는 기본적으로 웹 애플리케이션에 필요한 모든 정적 리소스를 한번에 다운로드한다. 이후 새로운 페이지 요청 시, 페이지 갱신에 필요한 데이터만을 전달받아 갱신하므로 전체적인 트래픽을 감소할 수 있고, 전체 페이지를 다시 렌더링하지 않고 변경되는 부분만을 갱신하므로 전체적인 트래픽을 감소할 수 있고, 전체 페이지를 다시 렌더링하지 않고 변경되는 부분만을 갱신하므로 새로고침이 발생하지 않아 네이티브 앱과 유사한 사용자 경험을 제공할 수 있다.

모바일의 사용이 증가하고 있는 현 시점에 트래픽의 감소와 속도, 사용성, 반응성의 향상은 매우 중요한 이슈이다. SPA의 핵심 가치는 사용자 경험(UX) 향상에 있으며 부가적으로 애플리케이션 속도의 향상도 기대할 수 있어서 모바일 퍼스트(Mobile First) 전략에 부합한다.

###### SPA의 구조적 단점
```
초기 구동 속도
SPA는 웹 애플리케이션에 필요한 모든 정적 리소스를 최초에 한 번 다운로드하기 때문에 초기 구동 속도가 상대적으로 느리다.
```
```
SEO(검색엔진 최적화) 문제
SPA는 서버 렌더링 방식이 아닌 자바스크립트 기반 비동기 모델이다. Angular 또는 React 등의 SPA 프레임워크는 서버 렌더링을 지원하는 SEO 대응 기술이 이미 존재하므로 선별적 SEO 대응이 가능하다.
```

### Routing
라우팅이란 출발지에서 목적지까지의 경로를 결정하는 기능이다. 애플리케이션의 라우팅은 사용자가 태스크를 수행하기 위해 어떤 화면에서 다른 화면으로 전환하는 내비게이션을 관리하기 위한 기능을 의미한다.

###### 브라우저가 화면을 전환하는 경우
```
1. 브라우저의 주소창에 URL을 입력하면 해당 페이지로 이동한다.
2. 웹페이지의 링크를 클릭하면 해당 페이지로 이동한다.
3. 브라우저의 뒤로가기 또는 앞으로가기 버튼을 클릭하면 사용자가 방문환 웹페이지의 기록의 뒤 또는 앞으로 이동한다.
```
Ajax 요청에 의해 서버로부터 데이터를 응답받아 화면을 생성하는 경우, 브라우저의 주소창은 URL은 변경되지 않는다. 이는 사용자의 방문 history를 의미하며, SEO 이슈의 발생 원인이기도 하다. **history 관리를 위해서는 각 페이지는 브라우저의 주소창에서 구별할 수 있는 유일한 URL을 소유하여야 한다.**

### SPA와 Routing
#### 전통적 링크 방식
전통적 링크 방식은 link tag로 동작하는 기본적인 웹페이지의 동작 방식이다.

#### AJAX 방식
전통적 링크 방식의 속도 저하 요인을 보완하기 위해 등장하였다. AJAX는 자바스크립트를 이용해 비동기적으로 서버와 브라우저가 데이터를 교환할 수 있는 통신 방식이다.

#### Hash 방식
AJAX 방식은 history 관리가 되지 않는 단점이 있기에 이를 보완할 방법이 Hash 방식이다.
Hash 방식은 URI의 fragment identifier의 고유 기능인 앵커를 사용한다. fragment identifier는 hash mark 또는 hash라고 부르기도 한다.

#### PJAX
hash 방식의 가장 큰 단점이 SEO 이슈이다. 이를 보완할 방법이 HTML5의 History API인 pushState와 popstate 이벤트를 사용한 PJAX 방식이다.

pushState 메서드는 주소창의 URL을 변경하고 URL을 history entry로 추가하지만 요청하지 않는다.

### Conclusion
전통적 링크 방식에서 PJAX 방식까지 SPA의 발전 과정을 살펴보았다.
|구분|History 관리|SEO 대응|사용자 경험|서버 렌더링|구현 난이도|IE 대응|
|--|:--:|:--:|:--:|:--:|:--:|:--:|
|전통적 링크 방식|O|O|X|O|간단||
|AJAX 방식|X|X|O|X|보통|7이상|
|Hash 방식|O|X|O|X|보통|8이상|
|PJAX 방식|O|O|O|보통|복잡|10 이상|