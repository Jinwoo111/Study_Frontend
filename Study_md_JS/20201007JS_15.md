# 스코프
## 스코프란?
스코프는 자바스크립트를 포함한 모든 프로그래밍 언어의 기본적인 개념으로 확실한 이해가 필요하다. 스코프는 참조 대상 식별자를 찾아내기 위한 규칙이다. 스코프가 없다면 같은 식별자 이름은 충돌을 일으키므로 프로그램 전체에서 하나밖에 만들 수 없다. 스코프는 이와 같은 식별자 이름의 충돌을 방지한다.

## 스코프의 구분
###### 스코프를 구분하면 다음과 같다.
	+ 전역 스코프(Global scope)
	: 코드 어디에서든지 참조할 수 있다.
	+ 지역 스코프(Local scope or Function-level scope)
	: 함수 코드 블록이 만든 스코프로 함수 자신과 하위 함수에서만 참조할 수 있다.

###### 변수의 관점에서 스코프를 구분하면 다음과 같다.
	+ 전역 변수(Global variable)
	: 전역에서 선언된 변수이며 어디에든 참조할 수 있다.
	+ 지역 변수(Local variable)
	: 지역(함수) 내에서 선언된 변수이며 그 지역과 그 지역의 하부 지역에서만 참조할 수 있다.

변수는 선언 위치에 의해 스코프를 가지게 된다. 즉, 전역에서 선언된 변수는 전역 스코프를 갖는 전역 변수이고, 지역에서 선언된 변수는 지역 스코프를 갖는 지역 변수이다.

전역 스코프를 갖는 전역 변수는 전역에서 참조할 수 있다. 지역에서 선언된 지역 변수는 그 지역과 그 지역의 하부 지역에서만 참조할 수 있다.

## 자바스크립트 스코프의 특징
대부분의 언어는 **블록 레벨 스코프**를 따른다. 블록 레벨 스코프란 코드 블록 내에서 유효한 스코프를 의미한다. 하지만 자바스크립트는 **함수 레벨 스코프**를 따른다. 함수 레벨 스코프란 함수 코드 블록 내에서  선언된 변수는 함수 코드 블록 내에서만 유효하고 함수 외부에서는 유효하지 않다는 것이다.
단, ES6에 도입된 let 키워드를 사용하면 블록 레벨 스코프를 사용할 수 있다.

## 전역 스코프(Global scope)
전역에 변수를 선언하면 이 변수는 어디서든지 참조할 수 있는 전역 스코프를 갖는 전역 변수가 된다. 자바 스크립트는 타 언어와 달리 특별한 시작점이 없어 전역에 변수나 함수를 선언하기 쉽다. 하지만 시작점이 없어 코드가 나타나는 즉시 실행되어 전역에 변수를 선언하기 쉬워지고 전역 변수를 남발하는 문제를 야기시킨다.

## 비 블록 레벨 스코프
자바스크립트는 블록 레벨 스코프를 사용하지 않으므로 함수 밖에서 선언된 변수는 코드 블록 내에서 선언되었다할지라도 모두 전역 스코프를 갖게 된다.

## 함수 레벨 스코프
자바스크립트는 함수 레벨 스코프를 사용하기 때문에 함수 내에서 선언된 매개변수와 변수는 함수 외부에서는 유효하지 않다. 지역변수와 전역변수가 중복되면 지역변수를 우선하여 참조한다.

내부함수는 자신을 포함하고 있는 외부함수의 변수에 접근할 수 있다. 함수 영역에서 전역 변수를 참조할 수 있으므로 전역변수의 값도 변경할 수 있다. 내부 함수의 경우, 전역변수는 물론 상위 함수에서 선언한 변수에 접근 / 변경이 가능하다.

중첩 스코프는 가장 인접한 지역을 우선하여 참조한다.

## 렉시컬 스코프
자바스크립트를 비롯한 대부분의 프로그래밍 언어는 렉시컬 스코프를 갖는다. 렉시컬 스코프는함수를 어디서 호출하는지가 아니라 어디에 선언하였는지에 따라 결정된다. 그러니 함수를 어디에서 호출하였는지는 스코프 결정에 아무런 의미를 주지 않는다.

## 암묵적 전역
###### 예제
	var x = 10 	 // 전역변수
	function foo()
	{
		y = 20;		//선언하지 않은 식별자
		console.log(x + y);
	}
	foo(); 	//30
Y는 선언된 변수가 아니라 참조 에러가 발생한 것처럼 보이지만 실제로는 제대로 실행이 된다. 이는 선언하지 않은 식별자에 값을 할당하면 전역 객ㄱ체의 프로퍼티가 되기 때문이다. 자바스크립트 엔진은 y = 20을 window.y = 20으로 해석하여 프로퍼티를 동적 생성한다. 결국 y는 전역 객체의 프로퍼티가 되어 마치 전역 변수 처럼 동작하는데 이를 **암묵적 전역**이라 한다.

하지만 y는 객체의 프로퍼티로 추가되어 변수가 아니기에 호이스팅이 발생하지 않는다.

## 최소한의 전역변수 사용
전역변수 사용을 최소화하는 방법 중 하나는 애플리케이션에서 전역변수 사용을 위해 다음과 같이 전역변수 객체 하나를 만들어 사용하는 것이다. 	(데글라스 크락포드의 제안)

## 즉시실행함수를 이용한 전역변수 사용 억제
전역변수 사용을 억제하기 위해, 즉시 실행 함수(IIFE)를 사용할 수 있다. 이 방법을 사용하면 전역변수를 만들지 않으므로 라이브러리 등에 자주 사용된다.